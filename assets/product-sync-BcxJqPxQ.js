import{_ as i,p as d}from"./index-BuskQemj.js";const u=e=>{console.log(`ğŸ”„ Syncing ${e.length} products to database...`);let n=0,t=0,a=0;const o=[...d];e.forEach(r=>{const c=o.findIndex(l=>l.id===r.id);c>=0?(o[c]={...o[c],...r,updatedAt:new Date().toISOString()},t++):(o.push({...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),n++)});const s={total:e.length,added:n,updated:t,skipped:a,newDatabaseSize:o.length};return console.log(`âœ… Sync complete: ${n} added, ${t} updated, ${a} skipped`),console.log(`   Total products in database: ${o.length}`),{results:s,updatedDatabase:o}},g=e=>`// VSSPEED GLOBAL - Product Database
// Auto-generated by automation system on ${new Date().toISOString()}

export const products = ${JSON.stringify(e,null,4)};

export const categories = [
    'Performance Tuning',
    'Engine Components',
    'Suspension',
    'Brake Systems',
    'Exhaust Systems',
    'Exterior',
    'Interior',
    'Wheels & Tires',
    'Electronics',
    'Custom Fabrication'
];

export const brands = [...new Set(products.map(p => p.brand))];

export default products;
`,p=async(e,n)=>{try{const t=g(e);return console.log(`ğŸ’¾ Writing ${e.length} products to database file (${t.length} chars)...`),console.log(`   File: ${n}`),await new Promise(a=>setTimeout(a,500)),console.log("âœ… Database file updated successfully!"),!0}catch(t){return console.error("âŒ Error writing database file:",t.message),!1}},S=e=>{const t=["id","title","price","category"].filter(a=>!e[a]);return t.length>0?(console.warn(`âš ï¸  Product validation failed: missing ${t.join(", ")}`),!1):!0},P=async()=>{console.log(`
${"=".repeat(60)}`),console.log("ğŸš€ VSSPEED GLOBAL - FULL PRODUCT SYNC STARTED"),console.log(`   ${new Date().toLocaleString()}`),console.log(`${"=".repeat(60)}
`);try{const{scrapeAllSuppliers:e}=await i(async()=>{const{scrapeAllSuppliers:l}=await import("./supplier-scraper-DY1OACRg.js");return{scrapeAllSuppliers:l}},[]),{downloadAllProductImages:n}=await i(async()=>{const{downloadAllProductImages:l}=await import("./image-pipeline-C65UKQB3.js");return{downloadAllProductImages:l}},[]);console.log(`
ğŸ“‹ STEP 1: Scraping products from suppliers...`);const t=await e(25);console.log(`
ğŸ“‹ STEP 2: Downloading product images...`);const a=await n(t);console.log(`
ğŸ“‹ STEP 3: Validating product data...`);const o=a.filter(S);console.log(`   ${o.length}/${a.length} products validated`),console.log(`
ğŸ“‹ STEP 4: Syncing to product database...`);const{results:s,updatedDatabase:r}=u(o);return console.log(`
ğŸ“‹ STEP 5: Writing database file...`),await p(r,"src/data/productDatabase.js"),console.log(`
${"=".repeat(60)}`),console.log("âœ… FULL SYNC COMPLETE!"),console.log(`   Products Added: ${s.added}`),console.log(`   Products Updated: ${s.updated}`),console.log(`   Total Products: ${s.newDatabaseSize}`),console.log(`${"=".repeat(60)}
`),{success:!0,results:s}}catch(e){return console.error(`
âŒ SYNC FAILED:`,e.message),{success:!1,error:e.message}}};export{g as generateDatabaseFile,P as performFullSync,u as syncProductsToDatabase,S as validateProduct,p as writeProductDatabaseFile};
