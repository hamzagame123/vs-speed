const i=async(e,a="public/images/products")=>{try{const o=e.imageUrl,n=e.id.replace(/[^a-z0-9]/gi,"_").toLowerCase(),s=c(o),l=`${n}${s}`,t=(void 0)(a,l);return console.log(`üì• Downloading image for ${e.title}...`),await r(o,t),console.log(`‚úÖ Image saved: ${l}`),`/images/products/${l}`}catch(o){return console.error(`‚ùå Error downloading image for ${e.id}:`,o.message),"/images/products/placeholder.jpg"}},r=async(e,a)=>(await new Promise(o=>setTimeout(o,500)),console.log(`   Mock download: ${e} -> ${a}`),!0),m=async(e,a=5)=>{console.log(`üñºÔ∏è  Starting batch image download for ${e.length} products...`);const o=[];for(let n=0;n<e.length;n+=a){const s=e.slice(n,n+a),l=await Promise.all(s.map(async t=>{const g=await i(t);return{...t,image:g,originalImageUrl:t.imageUrl}}));o.push(...l),console.log(`   Progress: ${o.length}/${e.length} images downloaded`),n+a<e.length&&await new Promise(t=>setTimeout(t,1e3))}return console.log(`‚úÖ All ${o.length} images downloaded!`),o},c=e=>{const a=e.match(/\.(jpg|jpeg|png|webp|gif)$/i);return a?`.${a[1].toLowerCase()}`:".jpg"};export{m as downloadAllProductImages,i as downloadProductImage};
